/*! pre_code 2020-11-03 */

var __extends=this&&this.__extends||function(){var o=function(a,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,e){a.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(a,e)};return function(a,e){function t(){this.constructor=a}o(a,e),a.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}}(),PreLoadingView=function(t){function a(){var a=t.call(this)||this;a.width=Laya.stage.width,a.height=Laya.stage.height;var e=new Laya.Image("images/black.jpg");return e.width=a.width,e.height=a.height,a.addChild(e),a.bg=new Laya.Image(a.getSysMapSkin()),a.bg.centerX=0,a.bg.centerY=0,a.tip=new Laya.Label("首次加载时间较长，请耐心等待"),a.tip.anchorX=.5,a.tip.x=a.width>>1,a.tip.y=1131+LaunchLoad.offsetY,a.tip.color="#ffffff",a.tip.fontSize=23,a.tip.stroke=3,a.tip.strokeColor="#000000",a.lbl_info=new Laya.Label("抵制不良游戏，拒绝盗版游戏。注意自我保护，谨防受骗上当。"),a.lbl_info.centerX=0,a.lbl_info.y=1200+LaunchLoad.offsetY,a.lbl_info.align="center",a.lbl_info.color="#ffffff",a.lbl_info.fontSize=18,a.lbl_info.stroke=3,a.lbl_info.strokeColor="#000000",a.lbl_info2=new Laya.Label("适度游戏益脑，沉迷游戏伤身。合理安排时间，享受健康生活。"),a.lbl_info2.centerX=0,a.lbl_info2.y=1230+LaunchLoad.offsetY,a.lbl_info2.align="center",a.lbl_info2.color="#ffffff",a.lbl_info2.fontSize=18,a.lbl_info2.stroke=3,a.lbl_info2.strokeColor="#000000",a.bar_bg=new Laya.Image("images/bar_bg.png"),a.bar_value=new Laya.Image("images/bar.png"),a.bar_bg2=new Laya.Image("images/bar_bg.png"),a.bar_value2=new Laya.Image("images/bar.png"),a.lbl_progress=new Laya.Label("加载中..."),a.tips=new Laya.Label,a.box_bar=new Laya.Box,a.box_bar.x=26+LaunchLoad.offsetX,a.box_bar.y=1046+LaunchLoad.offsetY,a.box_bar.width=668,a.box_bar.height=75,a.bar_value.x=27,a.bar_value.y=5,a.bar_value2.x=27,a.bar_value2.y=50,a.bar_bg2.y=45,a.bar_value2.scaleX=0,a.lbl_progress.centerX=0,a.lbl_progress.y=1,a.lbl_progress.anchorX=.5,a.lbl_progress.align="center",a.lbl_progress.color="#fff5c1",a.lbl_progress.fontSize=22,a.tips.centerX=0,a.tips.y=-70,a.tips.width=500,a.tips.anchorX=.5,a.tips.align="center",a.tips.color="#fff5c1",a.tips.fontSize=24,a.tips.stroke=3,a.tips.strokeColor="#000000",a.tips.wordWrap=!0,a.tips.leading=6,a.box_bar.addChildren(a.bar_bg,a.bar_value,a.lbl_progress,a.bar_bg2,a.bar_value2,a.tips),a.addChild(a.bg),a.addChild(a.logo),a.addChild(a.tip),a.addChild(a.lbl_refreh),a.addChild(a.lbl_info),a.addChild(a.lbl_info2),a.addChild(a.box_bar),a}return __extends(a,t),a.prototype.getSysMapSkin=function(){var a=Laya.stage.width,e=Laya.stage.height;return(a>LaunchLoad.SCENE_WIDTH+1&&e>LaunchLoad.SCENE_HEIGHT+1||e>LaunchLoad.SCENE_HEIGHT+1?"images/mipmap/small1560":(LaunchLoad.SCENE_WIDTH,"images/mipmap/small1280"))+"/loading.jpg"},a.prototype.onOpened=function(){t.prototype.onOpened.call(this),this.setProgres2(),this.lbl_progress.text=this.dataSource?this.dataSource:"加载中...",this.bar_value.scaleX=0},a.prototype.setProgress=function(a){var e=this.dataSource?this.dataSource:"加载中...";this.lbl_progress.text=e+Math.ceil(100*a).toFixed(0)+"%",this.bar_value.scaleX=a},a.prototype.setProgres2=function(){var a=this;this.bar_value2.scaleX=0,this.parent&&Laya.Tween.to(this.bar_value2,{scaleX:1},2500,Laya.Ease.linearInOut,Laya.Handler.create(this,function(){Laya.timer.frameOnce(10,a,function(){a.setProgres2()})}))},a.prototype.onClosed=function(){t.prototype.onClosed.call(this),Laya.Tween.clearAll(this.bar_value2),this.bar_value2.scaleX=0},a}(laya.ui.Dialog),LaunchLoad=function(){function a(){this.ttime=0,this.init()}return a.prototype.init=function(){tl3d.Engine.canvas=Laya.init(a.SCENE_WIDTH,a.SCENE_HEIGHT,Laya.WebGL),console.log("初始化引擎"),Laya.Browser.onPC?Laya.stage.scaleMode=Laya.Stage.SCALE_SHOWALL:Laya.stage.scaleMode=Laya.Stage.SCALE_FIXED_AUTO,Laya.stage.alignH=Laya.Stage.ALIGN_CENTER,Laya.stage.mouseThrough=!0,Laya.stage.bgColor="#a06950",Laya.stage.setScreenSize(Laya.Browser.clientWidth*Laya.Browser.pixelRatio,Laya.Browser.clientHeight*Laya.Browser.pixelRatio),this.loadui=new PreLoadingView,this.loadui.dataSource="加载主程序中...",this.loadui.zOrder=30,this.loadui.show(!1,!1),this.starTween(),this.loadui.removeSelf},a.prototype.starTween=function(){var a=this;Laya.Tween.to(this,{ttime:1},3e3,null,null,300).update=Laya.Handler.create(this,function(){a.loadui.setProgress(a.ttime)},null,!1)},a.prototype.clearTween=function(){Laya.Tween.clearAll(this),this.loadui.setProgress(1)},Object.defineProperty(a,"offsetX",{get:function(){return isNaN(a._offsetX)&&(a._offsetX=Laya.stage.width-a.SCENE_WIDTH>>1),a._offsetX},enumerable:!0,configurable:!0}),Object.defineProperty(a,"offsetY",{get:function(){return isNaN(a._offsetY)&&(a._offsetY=Laya.stage.height-a.SCENE_HEIGHT>>1),a._offsetY},enumerable:!0,configurable:!0}),a.SCENE_WIDTH=720,a.SCENE_HEIGHT=1280,a}();window.LaunchLoad=LaunchLoad;